<?php

namespace App\__project__\__version__\Middleware;

use App\__project__\__version__\ServiceBaseController as Base;
use Store\Services\Validator;

class Validation extends Base {

    /**
     * @method handle
     * @return void
     */
    public function handle() {

        //check page on query
        $this->checkPageOnQuery();

        //check globally email
        $this->checkEmailValidForPost();
    }

    /**
     * @return bool
     */
    private function checkPageOnQuery(){

        //get page on query
        $page=$this->get('page');

        //check page on query for filter
        //throw exception as invalid argument
        if($page!==null && !is_numeric($page)){
            throw new \InvalidArgumentException('page variable that on query is not is numeric');
        }

        return true;
    }

    /**
     * @return bool
     */
    private function checkEmailValidForPost(){

        //where we are checking the email data
        //that comes with the post data globally.
        if($this->post('email')!==null){
            Validator::email($this->post('email'));
        }

        return true;

    }
}
